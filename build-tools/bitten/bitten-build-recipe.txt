<!-- Clansuite Build Recipe for Trac's "Bitten" -->
<build description="Clansuite Bitten-Building-Recipe"
       xmlns:sh="http://bitten.cmlenz.net/tools/sh"
       xmlns:php="http://bitten.cmlenz.net/tools/php"
       xmlns:svn="http://bitten.cmlenz.net/tools/svn">

        <step id="svn export" description="SVN Export">
            <sh:exec file="echo" args="SVN Export - Task started"/>
            <svn:export url="/home/clansuite/svn"
                        dir="/home/clansuite/svn-export"
                        path="${path}"
                        revision="${revision}" />
            <sh:exec file="echo" args="SVN Export - Task finished"/>
        </step>

        <step id="build" description="Build Clansuite">
            <sh:exec file="echo" args="Build started - Task started"/>
            <php:phing file="/build-tools/clansuite-build.xml" target="rebuild"/>
            <sh:exec file="echo" args="Build - Task finished"/>
        </step>

        <step id="Testing" description="PHPUnit Testing">
           <sh:exec file="echo" args="Test started - Task started"/>
           <sh:exec file="phpunit" args="--log-xml frameworkTrunkResults.xml FrameworkTestSuite.php" />
           <php:phpunit file="frameworkTrunkResults.xml"/>
           <sh:exec file="echo" args="Test - Task finished"/>
         </step>

        <step id="Doxygen Documentation">
            <php:phing file="/build-tools/clansuite-build.xml" target="doxygen"/>
        </step>

        <step id="PHPDoc Documentation">
            <sh:exec file="echo" args="PHPDoc Generation - Task started"/>
            <php:phing file="/build-tools/clansuite-build.xml" target="phpdoc"/>
            <sh:exec file="echo" args="PHPDoc Generation - Task finished"/>
        </step>

        <step id="PHP-XRef Documentation">
            <sh:exec file="echo" args="PHP-XRef Generation - Task started"/>
            <php:phing file="/build-tools/clansuite-build.xml" target="phpxref"/>
            <sh:exec file="echo" args="PHP-XRef Generation - Task finished"/>
        </step>

        <step id="coverage" description="Phing Code Coverage">
            <sh:exec file="echo" args="PHP-XRef Generation - Task started"/>
            <php:coverage file="build/coverage.xml" />
        </step>
</build>