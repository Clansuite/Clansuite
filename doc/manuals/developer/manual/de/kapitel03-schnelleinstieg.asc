////////////////////////////////////////////////////////////////////////////////

This file belongs to "Clansuite - just an eSports CMS" as part of the "Clansuite Documentation".
This file is written in ASCIIDOC format. It's dual-licensed under the GNU Free Documentation License,
Version 1.3 and the Creative Commons Attribution-Share-Alike 3.0 License (cc-by-sa).

You find a comprehensive AsciiDoc UserGuide here:
http://www.methods.co.nz/asciidoc/userguide.html

You find a Ascii Doc SheetCheat here:
http://powerman.name/doc/asciidoc-compact

For the Clansuite Documentation visit:
http://www.clansuite.com/documentation/

SVN: $Id$

////////////////////////////////////////////////////////////////////////////////

== Kapitel 3 - Der Einstieg in die Clansuite Entwicklung

Dieses Kapitel ist eine Anleitung für den Einstieg in die Clansuite-Entwicklung.
Zunächst wird die Einrichtung eines lokalen Entwicklungs-Webservers und das Holen des Clansuite-Quellcodes aus dem SVN-Archiv besprochen.
Dann wird die Einrichtung einer Entwicklungsumgebung und die Installation der Clansuite Community Toolbar erklärt.

Grundlage für die Beschreibungen innerhalb dieses Kapitels ist ein Windows-XP Betriebssystem.
Die Schritte können allerdings denkanalog auf Linux und MAC übertragen werden.

=== Das Einrichten des lokalen Webservers (Schritt 1)

Am einfachsten lässt sich ein Webserver unter Windows installieren, wenn man ein fertiges Webserverpaket verwendet.
So lässt sich beispielsweise das XAMPP-Package von http://www.apachefriends.org/de/xampp.html[Apachefriends.org] 
oder das Clansuite Webserverpack verwenden. Dieses Package ist bereits so 
eingerichtet, dass es ohne großen Konfigurationsaufwand lauffähig ist. Die normale XAMPP Version, aber auch 
der "XAMPP Lite" können eingesetzt werden.

Caution: Beachte(!): Die von mir bereitgestellten Konfigurationsdateien beziehen sich immer auf den "xampplite"!

Die Webseite des Apache-Friends Projekts: http://www.apachefriends.org/de/xampp-windows.html

Caution: Windows Vista macht manchmal etwas Probleme mit XAMPP, daher solltet Ihr XAMPP auf keinen Fall unter "C:\Programme" installieren! Bitte wählt ein eigenes Verzeichnis, etwa "C:\xampplite".

TIP: 1: Im Verzeichnis von XAMPP findet man die Datei "xampp-control.exe". Diese kann in die Taskleiste gezogen werden (drag'n'drop), wo sie dann einen komfortablen Server-Startknopf darstellt.

TIP: 2: Sollte man den Apache Server nicht starten können und zeigt sich immer der Fehlercode: 0xc0150002. 
Dann ist das [url=http://www.microsoft.com/downloads/details.aspx?FamilyID=32bc1bee-a3f9-4c13-9c99-220b62a191ee&displaylang=de]Microsoft Visual C++ 2005 Redistributable Package (x86)[/url] 
nicht vorhanden und muss zunächst installiert werden.

=== Den Clansuite Sourcecode mittels TortoiseSVN aus dem SVN holen (Schritt 2)

Der Quellcode von Clansuite kann nun aus dem Subversion-Archiv (englisch: Repository) geholt werden.
Das kann einerseits über die Konsole geschehen, andererseits kann ein grafisches Interface für SVN eingesetzt werden.

.a) Das SVN-Userinterface "TortoiseSVN" installieren 

Ich rate hier zu "Tortoise SVN". Aber natürlich gibt es auch andere SVN-Userinterfaces, wie z.B.: RapidSVN oder gSVN.
Es ist ein nützliches Standardtool für diese Aufgabe, da es sich in den Explorer einklinkt und dort ein SVN Verwaltungsmenü anbietet.
Bitte achten Sie darauf, je nach Betriebssystem (32bit oder 64bit) die richtige Version herunterzuladen.
Nach der Installation ist gegebenenfalls ein Neustart des Systems notwendig.

Webseite des "Tortoise" Projekts: http://tortoisesvn.net/downloads

.b) Den Clansuite Sourcecode beziehen

Im Datei-Explorer-Kontextmenü (rechte Maustaste) sollte nun "SVN Checkout" und ein Menü mit dem Namen "Tortoise SVN" auftauchen.

Die URLs für den Checkout von Clansuite sind:
svn://svn.gna.org/svn/clansuite/trunk - checkt nur den trunk/head aus
svn://svn.gna.org/svn/clansuite - checkt das ganze Projekt aus

Als Checkout-Directory kann man direkt einen lokalen Webserverpfad nehmen:
C:\xampplite\htdocs\clansuite
Ich verwende ein Verzeichnis namens "work" und lege alle Projekte darin ab:
C:\xampplite\htdocs\work\clansuite

Sobald der Checkout erfolgreich beendet worden ist, steht der Sourcecode im Checkout-Verzeichnis zum bearbeiten und installieren zur Verfügung.

TIP: 1:
Das Verzeichnis "C:\xampplite\htdocs\" entspricht der Browser-URL "http://localhost".
Das Verzeichnis "C:\xampplite\htdocs\work" entspricht der Browser-URL "http://localhost/work/".

TIP: 2: Man gehe mit dem Explorer in das Verzeichnis "C:\xampplite\htdocs\work\", dort ist "clansuite" enthalten. 
Hier nun per Kontextmenü eine "Verknüpfung erstellen" und diese in die Taskleiste ziehen. Hierdurch erhält man einen 
sofortigen Sprung in das Entwicklungsverzeichnis.

=== Die Entwicklungsumgebung einrichten (Schritt 3)

Als nächstes kann man die Umgebung einrichten. Das Einrichten einer Entwicklungsumgebung kostet Zeit und Mühe und kann, 
bis alle Einstellungen bis ins Detail getroffen sind, zu einem Geduldsspiel werden.
Am Ende zahlt sich die Investition sicher aus, dennoch ist der Konfigurationsaufwand bis alles zufriedenstellend läuft frustrierend. 
In diesem Abschnitt werden daher einige Erfahrungen der Clansuite Entwickler im Umgang mit Entwicklungstools weitergegeben.
Beschrieben wird welche Software, warum verwendet und wie diese Tools im Zusammenhang mit Clansuite eingesetzen werden.

=== Webbrowser

Natürlich gehört auch der Webbrowser zur Entwicklungsumgebung. Webbrowser sind als Standardapplikationen für jede Plattform verfügbar.
Clansuite kann mit mehreren Webbrowsern verwendet werden. Im Vordergrund steht dabei die Entwicklung für Mozilla Firefox und Opera, sowie Safari.

Eine Läuffähigkeit auf dem Mircosoft Internet Explorer ist zu keinem Zeitpunkt angestrebt. 
Denn das Einpflegen von Fixes und Patches für IE ist eine nervige Geschichte und der dabei entstehende Flickenteppich lästig.
Neuere Versionen werden zeigen, ob sich eine Kompatibilität einstellt.

Wer Mozilla Firefox einsetzt, kann auf zahlreiche Addons für Entwickler zurückgreifen.
Stellvertretend für viele hilfreiche Werkzeuge sind die Web Developer Extension, Firebug sowie YSlow genannt.

.Webdeveloper Tools für Firefox

Firebug:
http://www.getfirebug.com/
https://addons.mozilla.org/de/firefox/addon/1843

YSlow:
http://developer.yahoo.com/yslow/
https://addons.mozilla.org/en-US/firefox/downloads/file/21643/

FirePHP:
http://www.firephp.org/

Webdeveloper Toolbar:
http://chrispederick.com/work/web-developer/
https://addons.mozilla.org/de/firefox/addon/60

=== Clansuite Toolbar als Firefox-Addon installieren

Um die Entwicklerinstallation wirklich rund zu machen und einen sehr komfortablen Zugriff
auf alle Projektinformationen zu haben, kann man nun noch die Clansuite Community Toolbar herunterladen
und durch "Ausführen mit Firefox" im Browser installieren.
Unter "Optionen" lassen sich die Entwicklermenüs einschalten.

Eine Besonderheit stellen die ersten 4 Links des Menüs "httpd" dar.
Mit ihnen ist es möglich, direkt den virtuellen Host "clansuite-dev.com" im Browser aufzurufen.

"Frontend @ localhost"  ->  "http://www.clansuite-dev.com"
"Admin Control Panel"   ->  "http://www.clansuite-dev.com/?mod=admin"
"Installation"  ->  "http://www.clansuite-dev.com/installation/"
"Web-Installation"  ->  "http://www.clansuite-dev.com/installation/webinstaller/webinstaller.php"

=== MySQL

http://localhost/phpmyadmin/ aufrufen und einen neuen User mit Passwort anlegen.

=== VirtualHost

Wer sich den virtuellen Host "www.clansuite-dev.com" lokal einrichtet, kann später die Schnellverknüpfungen der Clansuite Toolbar nutzen.

Manache fragen sich an dieser Stelle, warum der virtuelle Host nicht "www.clansuite.com" sein darf.
Die Antwort ist einfach. Weil die lokale VHost-Adresse dann den echten Host, mit der Internetseite inklusive Forum, ersetzen würde 
und man folglich keinen Zugang hätte. Daher wählt man eine "fiktive" oder jedenfalls ungebräuchliche VHost Domain.

Unter "c:\xampplite\apache\conf\extra" findet man die Datei "httpd-vhosts.conf".
In dieser Datei kann manuell der Vhost "ServerName clansuite-dev.com", sowie "ServerAlias www.clansuite-dev.com" hinzugefügt werden.
Alternativ kann die Datei einfach mit meiner Version aus dem SVN ersetzt werden.
Die entsprechende Datei gibts hier: http://svn.gna.org/svn/clansuite/trunk/build-tools/xampp/httpd-vhosts.conf

Damit das System diese URL auf den lokalen Server umleitet, muss noch die "hosts"-Datei
im Verzeichnis "c:\windows\system32\drivers\etc\hosts" angepasst werden.
Man trage "127.0.0.1 clansuite-dev.com" sowie "127.0.0.1 www.clansuite-dev.com" um eine entsprechende URL-Namensauflösung zum localhost zu erhalten.
Alternativ kann auch meine Datei aus dem SVN geholt werden:
http://svn.gna.org/svn/clansuite/trunk/build-tools/xampp/hosts

=== Xdebug - als PHP-Debugger einbinden

Download
Falls "php_xdebug.dll" nicht vorhanden ist, dann von http://xdebug.org/ downloaden.
Entsprechend umbenennen und ins Verzeichnis "C:\xampplite\php\ext" ablegen.

XDebug in der php.ini einschalten
In "c:\xampplite\apache\php.ini" nach "xdebug" suchen.

Wichtig ist, nicht die alte Methode zum Laden der Webservererweiterung zu verwenden.
Alte Versionen von XDebug wurden mittels "extension=php_xdebug.dll" geladen.
Diese Art und Weise des Ladens der Debugging-Erweiterung führt jedoch zu erheblichen Problemen.
Dies liegt daran, dass XDebug, wenn es als normales Modul des Webservers läuft, nicht auf alle Sichtbarkeitsbereiche der Zend Engine zugreifen kann.
Stellen Sie also zunächst sicher, dass "extension=php_xdebug.dll" auskommentiert ist.
Die Auskommentierung wird durch voranstellen eines Semikolon erreicht (";extension=php_xdebug.dll").

Eine neuere und bessere Methode der Einbindung ist daher XDebug als Erweiterung der Zend Engine zu laden.
Dies kann durch "zend_extension_ts = "c:\xampplite\php\ext\php_xdebug.dll" erreicht werden.
Hierfür ist der Zend Extension Manager zu aktivieren. Dies kann durch hinzufügen der Zeile
zend_extension_ts = "C:\xampp\php\zendOptimizer\lib\ZendExtensionManager.dll" erfolgen.
Zu beachten ist die Inkompatibilität mit der Zend Erweiterung "Zend Optimizer".
Zend Optimizer durch Auskommentieren der entsprechenden Zeilen zu deaktiveren.
Um dies zu tun, kann nach der Zeichenfolge "zend_extension_manager.optimizer_ts" in der php.ini gesucht werden.
Zend Optimizer ist eine Laufzeitbibliothek, die den Quellcode vor der Kompilierung optimiert um somit eine Beschleunigung erzielen.

Eine ausführliche Anleitung zum Thema "Wie installiere ich XDebug?" findet sich in Kapitel 16 (Der Webserver).

=== Dokumentationswerkzeuge AsciiDoc + Python
Für die automatische Erstellung der Dokumentation auf einem Windowssystem wird AsciiDoc und deshalb auch Python benötigt.
AsciiDoc: http://www.methods.co.nz/asciidoc/
Python: http://www.python.org/ftp/python/2.5.1/python-2.5.1.msi

Für die SourceCode-Highlighting Features von AsciiDoc wird zusätzlich das "src-highlite" Paket des GNU Projekts benötigt.
http://gnuwin32.sourceforge.net/

=== gettext Werkzeuge
Für die automatische Erstellung der Übersetzungsdateien bzw. das Auslesen von zu übersetzenden Texten werden die gettext Tools benötigt.
http://www.gnu.org/software/gettext

=== Einfache Texteditoren und Werkzeuge

.Notepad++
Notepad++ ist ein Open-Source Texteditor.
Er bietet Syntax-Highlightning und alle Funktionen, die zur Bearbeitung von PHP- und HTML- und CSS-Dateien erforderlich sind.
http://notepad-plus.sourceforge.net/de/site.htm

.WinMerge
WinMerge ist ein Open-Source-Werkzeug zum Vergleichen zweier Dateien und zum Feststellen von Versionsunterschieden.
http://winmerge.org/

=== Integrierte Entwicklungsumgebungen (IDEs)

.Netbeans
Eine in Java geschriebene Open-Source IDE für Windows, Linux, Mac OS X und Solaris. Netbeans beherrscht eine 
Reihe fortschrittlicher Techniken, um Entwickler zu unterstützen. Dazu gehören automatische 
Quellcodevervollständigung und vorlagenbasiertes Erstellen von Quellcode, sowie eine Kontexterkennung von
verfügbaren Methoden und Variablen unter Auswertung des DocBlocks.
http://netbeans.org/

.Eclipse
In Java geschriebene integrierte Entwicklungsumgebung die professionellen Ansprüchen genügt.
Es gibt zahlreiche Addons.
http://www.eclipse.org/
Insbesondere gibt es ein Eclipse-Paket namens PHP Development Tools (PDT) welches speziell für PHP-Entwickler zusammengestellt wurde.
http://www.eclipse.org/pdt/

=== SQL und Datenbankenwerkzeuge

.phpMyAdmin
phpMyAdmin ist eine freie PHP-Applikation und in den meisten Webserverstacks bereits als Verwaltungswerkzeug für MySQL-Datenbanken enthalten.
http://www.phpmyadmin.net/

.HeidiSQL
HeidiSQL ist ein sehr einfaches grafisches Verwaltungswerkzeug für MySQL Datenbanken.
Es wird von Ansgar Becker (http://www.anse.de/) in Delphi entwickelt.
http://www.heidisql.com/

.MySQL Workbench Community Edition
http://www.mysql.de/products/workbench/

.SQL Buddy
http://sqlbuddy.com/ 

=== Allgemeine Werkzeuge

.Putty
PuTTY ist ein Werkzeug zur Verwaltung von SSH-Keys unter Windows-Systemen und ein telnet Client.
http://www.putty.org/
http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html

.WinSCP
WinSCP ist ein grafisches SFTP, FTP Werkzeug. Es unterstüzt das SCP-Protokoll und die Verwendung von geschützten SSH-Verbindungen (Tunneling). 
http://winscp.net/

.Filezilla
Ein Open-Source Standardwerkzeug für Dateitransfers mittels File-Transfer-Protocol (FTP).
Download: http://filezilla-project.org/