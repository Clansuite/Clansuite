////////////////////////////////////////////////////////////////////////////////

This file belongs to "Clansuite - just an eSports CMS" as part of the "Clansuite Documentation".
This file is written in ASCIIDOC format. It's dual-licensed under the GNU Free Documentation License,
Version 1.3 and the Creative Commons Attribution-Share-Alike 3.0 License (cc-by-sa).

You find a comprehensive AsciiDoc UserGuide here:
http://www.methods.co.nz/asciidoc/userguide.html

You find a Ascii Doc SheetCheat here:
http://powerman.name/doc/asciidoc-compact

For the Clansuite Documentation visit:
http://www.clansuite.com/documentation/

SVN: $Id$

////////////////////////////////////////////////////////////////////////////////

== Kapitel 12 - Die Clansuite Toolbar

In diesem Kapitel erfahren Sie, wie Sie die Clansuite Toolbar installieren, konfigurieren und verwenden.
Entwickler erhalten zudem einen Einblick in die Programmierung und die Veröffentlichung der Toolbar.

=== Allgemeines

Die "Clansuite Toolbar" ist ein Toolbar-Addon für den Webbrowser Mozilla Firefox. Sie unterstützt die
Entwickler und Nutzer mit Links zu den verschiedenen projektrelevanten Ressourcen und nützlichen
Suchfunktionen. Unabhängig von der Website, die Sie gerade besuchen, können Sie so jederzeit die Ressourcen
des Clansuite Projekts erreichen und zusätzlich in verschiedenen Handbüchern, Foren und Suchmaschinen
nachschlagen, denn Sie haben das Sucheingabefeld immer im Blickfeld. Es befindet sich direkt unter der
Adresszeile des Browsers. Ein hervorzuhebendes Features der Suche ist, die Mehrfachsuche eines Suchbegriffs
auf den jeweiligen Zielseiten. Die Toolbar stellt sowohl Links zur Clansuite Dokumentation, als auch zu den
Dokumentationen der Clansuite Libraries (z.B. Smarty und Doctrine) und der Projektwerkzeuge (z.B. Asciidoc und
Subversion) bereit. Entwickler schätzen den komfortablen Schnellzugriff auf den lokalen Entwicklungswebserver
(phpMyAdmin, Arbeitsverzeichnisse, Statusreport, Error- und Accesslog) und den Bugtracker. Abgerundet wird die
Toolbar durch den praktischen "GO TO" Button. Er ermöglicht den Direktaufruf des Frontends, des Backends, des
Installers, des Webinstallers und des Converters.

Kurzum: Die Clansuite Toolbar ist eine Hilfe für Jeden, der auf Informationen rund um Clansuite setzt! Sie ist
als nützliche Hilfe ein Muß für jeden Entwickler!

image::images/chapter12/Toolbar-01-FirefoxDockedToolbar.png[Das Bild zeigt die Clansuite Toolbar im Firefox Browser.]

.Links
http://forum.clansuite.com/index.php/topic,127.0.html Forum Thread zur Clansuite Toolbar

=== Systemvoraussetzungen, Installation, Einblenden/Ausblenden, Updates und Deinstallation

.Systemvoraussetzungen
Die Toolbar ist betriebssystemunabhängig und erfordert den Webbrowser: Mozilla Firefox Version 3 oder höher.

TIP: Falls Sie Mozilla Firefox nicht installiert haben sollten, können Sie die aktuelle Version auf der
Webseite http://www.mozilla.com/de/ finden und herunterladen.

.Installation
Die Toolbar ist eine selbstinstallierende Erweiterung für den Webbrowser Firefox. Ihre Installation ist
denkbar einfach: sie kann bequem durch Aufruf der XPI Datei installiert werden. Ein Doppelklick genügt also.

Die Clansuite-Toolbar ist unter folgender URL zu beziehen: http://www.clansuite.com/toolbar/.

.Einblenden/Ausblenden
Sie können die Toolbar sehr einfach ein- und ausblenden, indem Sie über den Menüpunkt „Ansicht =>
Symbolleisten” (Alt+a und y) den Haken neben „Clansuite Toolbar” setzen oder entfernen.

.Updates
Nach der Installation aktualisiert sich die Toolbar beim Erscheinen einer neuen Version automatisch.
Eine händische Deinstallation mit anschließender Installation der neuen Version ist ebenfalls möglich.

.Deinstallation
Sollte Ihnen die Toolbar keine Hilfe sein, dann können Sie sie über die Addon-Verwaltung des Firefox
deinstallieren. Dafür navigieren Sie zum Menüpunkt „Extras => Addons” (Alt+x und a). Auf der Übersichtsseite,
welche Ihre installierten Addons zeigt, wählen Sie nun „Clansuite Community Toolbar” aus und klicken auf den
Button „Deinstallieren” (Taste d). Die Toolbar wird daraufhin von ihrem System gelöscht und auch aus der
Konfiguration des Firefox gelöscht. Damit die neue Konfiguration ohne die Toolbar aktiv wird, müssen sie den
Firefox neustarten.

=== Übersicht über die Menüpunkte und Funktionen der Toolbar

Die meisten Menüpunkte der Toolbar sind Links. Ein einfacher Klick genügt daher, um die Zielseite anzusteuern.

.Das Menu "Clansuite"
image::images/chapter12/Toolbar-02-ClansuiteMenuItems.png[Das Bild zeigt das Clansuite-Menü.]

.Das Menu "Suche"
image::images/chapter12/Toolbar-03-SearchOptions.png[Das Bild zeigt das Menü der Suche.]

.Das Menu "Documentation"
image::images/chapter12/Toolbar-04-DocumentationMenu.png[Das Bild zeigt das Dokumentations-Menü.]

.Das Menu "Developer"
image::images/chapter12/Toolbar-05-DeveloperMenu.png[Das Bild zeigt das Developer-Menü.]

.Das Menu "Webserver (httpd)"
image::images/chapter12/Toolbar-06-WebserverMenu.png[Das Bild zeigt das Webserver-Menü.]

.Das Menu "Bugtracker"
image::images/chapter12/Toolbar-07-Bugtracker.png[Das Bild zeigt die Links zum Bugtracker.]

.Das Menu "GoTo"
image::images/chapter12/Toolbar-08-WebserverGoTo.png[Das Bild zeigt die GoTo Links.]

=== Konfiguration der Clansuite Toolbar

Die Toolbar hat einige wenige Konfigurationsmöglichkeiten.

.Der Konfigurationsdialog Toolbar Elemente
image::images/chapter12/Toolbar-09-OptionsDialog-ToolbarElements.png[Das Bild zeigt den Konfigurationsdialog für die Elemente der Toolbar und das Verhalten beim Öffnen der Links.]

Im Konfigurationsdialog für die Toolbarelemente unterteilt sich in zwei Teildialoge. Erstens können Sie
festlegen, welche Elemente in der Toolbar angezeigt werden sollen. Um ein Element anzuzeigen, setzen sie den
entsprechenden Haken mittels Linksklick auf die Checkbox.

Zweitens können Sie bestimmen, auf welche Art und Weise die Links geöffnet werden sollen. Wenn Sie "Open in
Tab" aktivieren, werden die Links der Toolbar jeweils in einem neuen Tab geöffnet, anstatt im aktuell aktiven
Browsertab. Wenn Sie "Open Tab in background" aktivieren, werden die Links der Toolbar jeweils in einem neuen
Tab geöffnet, wobei der aktuell aktive Browsertab im Vordergrund bleibt und die Tabs im Hintergrund geladen
werden.

.Der Konfigurationsdialog Pfade
image::images/chapter12/Toolbar-10-OptionsDialogPaths.png[Das Bild zeigt den Konfigurationsdialog für die Konfiguration der Pfade für das Webservermenü und die Webserverlogs.]

Mittels des Konfigurationsdialogs für Pfade ist es möglich, die korrekten Pfade zu den Webserverlogs
(error.log und access.log) anzugeben. Zugleich ist es möglich ein Webserver "Working Dir", sowie ein
"Clansuite Dir" zu setzen, um schnell zwischen den beiden lokalen Arbeitsplätzen zu wechseln. Die
entsprechenden Menüpunkte "Working Dir" und "Clansuite Dir" befinden sich im Webserver-Menü "httpd".


=== Programmierung der Toolbar

.Weiterführende Links
https://developer.mozilla.org/en/Extensions

=== Verzeichnisstruktur

.SVN-Repository
Die Toolbar ist ein eigenständiges Projekt innerhalb des Clansuite SVN-Repositories.
Ihr Verzeichnis innerhalb des SVN-Repositories ist svn://svn.gna.org/svn/clansuite/toolbar.
Das Verzeichnis ist klassisch unterteilt in "/trunk", "/tags" und "/branches".

.Toolbar
Die Verzeichnisstruktur der Toolbar entspricht dem klassischen Layout einer Firefox Erweiterung. Firefox
unterscheidet XULRunner Anwendungen, Erweiterungen und Themes. Dabei wird eine Grundstruktur für die
Programmbündel vorgegeben.[footnote:https://developer.mozilla.org/de/Bundles] Das Hauptverzeichnis ist
"/Chrome". Es wird unterteilt in das Verzeichnis "/Content", welches die wesentlichen Dateien der Toolbar
enthält, in das Verzeichnis "/Locale", welches die Übersetzungsdateien enthält und das Verzeichnis "/Skin",
welches Images und Icons für die Toolbar beinhaltet.

image::images/chapter12/Toolbar-20-SvnDirStructure.png[Das Bild zeigt die SVN Verzeichnisstruktur der Clansuite Toolbar.]

image::images/chapter12/Toolbar-21-FilesMainDir.png.png[Das Bild zeigt das Hauptverzeichnis der Clansuite Toolbar.]

image::images/chapter12/Toolbar-22-FilesChromeContent.png[Das Bild zeigt das Verzeichnis /chrome/content der Clansuite Toolbar.]

=== Das Buildscript der Toolbar

- Automatisches Packen der Toolbar (zip->xpi)
https://developer.mozilla.org/de/Packen_von_Erweiterungen

=== Die wesentlichen Dateien der Toolbar

Jede Erweiterung benötig eine install.rdf Datei mit beschreibenden Informationen über die Erweiterung wie eine
einmalige ID, Version, Urheber oder Kompatibilität. Eine XPI-Datei beinhaltet mindestens die folgenden
Dateien: XUL-Datei, Manifest, install.rdf und update.rdf. Diese Dateien werden ergänzt um Javascript (*.js)
und kasakdierende Stylesheets zur Ausgabeformatierung (*.css), sowie Bilddatien, die z.B. als Icons und
Buttons angezeigt werden.

=== XUL

=== Übersetzung der Toolbar

Eine lokalisierte Version der Toolbar ist angestrebt. Im Bugtracker bestehen dazu die Tickets:
http://trac.clansuite.com/ticket/142 sowie http://trac.clansuite.com/ticket/143.

=== Checkliste für eine Veröffentlichung der Toolbar

Um eine neue Version der Clansuite Toolbar zu veröffentlichen sind folgende Schritte notwendig:

1.  Ausgangspunkt: Es sind Änderung am Sourcecode vorgenommen worden.
2.  Die Versionnummer in "install.rdf" und "/chrome/content/clansuite_about.xul" (Zeile 40 ff.) erhöhen
    (Frage: Muss man hier erneut Mccoy über install.rdf laufen lassen?)
3.  Die Toolbar mittels build[.bat|.sh] automatisch builden lassen.
4.  Die entstandene Datei "clansuite-toolbar-v.xpi" in "clansuite-toolbar-v(Versionummer).xpi" umbenennen,
    dabei die Versionsnummer eintragen.
5.  Den SHA1 Hash der "clansuite-toolbar-v(Versionummer).xpi" ermitteln
6.  Den SHA1 Hash in die Datei "update.xml" eintragen.
7.  Die Datei "update.xml" in "update.rdf" umbenennen.
8.  Das Tool McCoy zum Siginieren der "update.rdf" verwenden.
9.  Die HTML Datei "updateInfo-v{Versionummer}.xhtml" mit dem aktuellen Informationstext zur Version füllen.
10. Die Dateien in das Verzeichnis "/clansuite/toolbar" hochladen:
    1) update.rdf, 2) clansuite-toolbar-v(Versionnummer).xpi, 3) updateInfo-v(Versionummer).xhtml