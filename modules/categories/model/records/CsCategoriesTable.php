<?php

/**
* This class has been auto-generated by the Doctrine ORM Framework
*/
class CsCategoriesTable extends Doctrine_Table
{
    /**
    * construct
    * Introducing Named Queries
    */
    public function construct()
    {
        // Get all news elements
        $this->addNamedQuery(
            'fetchAllCategories', Doctrine_Query::create()
               ->select('c.*, m.name as module')
               ->from('CsCategories c')
               ->leftJoin('c.CsModules m on c.module_id = m.module_id'));
    }




    public static function fetchAll()
    {
        return Doctrine_Query::create()
               ->select('c.*')
               ->from('CsCategories c')
               ->fetchArray();
    }

    public static function fetchAllCategories($sortorder)
    {
        return Doctrine_Query::create()
               ->select('c.*, m.name as module')
               ->from('CsCategories c')
               ->leftJoin('c.CsModules m on c.module_id = m.module_id')
               ->orderby($sortorder)
               ->fetchArray();
    }


    /**
     * fetchSingleCategory
     *
     */
    public static function fetchSingleCategory($cat_id)
    {
        $cats =  Doctrine_Query::create()
                    ->select('c.*')
                    ->from('CsCategories c')
                    ->where('cat_id = ' . $cat_id)
                    ->fetchArray();

        # put things in an array-box for delivery multiple things with one return stmt
        return $cats['0'];
    }
}
?>