<?php

/**
 * CsCategoriesTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    Clansuite
 * @subpackage Database
 * @author     Clansuite - just an eSports CMS <vain at clansuite dot com>
 * @version    SVN: $Id$
 */
class CsCategoriesTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object CsCategoriesTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('CsCategories');
    }

    /**
    * construct
    * Introducing Named Queries
    */
    public function construct()
    {
        // Get all news elements
        $this->addNamedQuery(
            'fetchAllCategories', Doctrine_Query::create()
               ->select('c.*, m.name as module')
               ->from('CsCategories c')
               ->leftJoin('c.CsModules m on c.module_id = m.module_id'));
    }

    public static function fetchAll()
    {
        return Doctrine_Query::create()
               ->select('c.*')
               ->from('CsCategories c')
               ->fetchArray();
    }

    public static function fetchAllCategories($sortorder)
    {
        return Doctrine_Query::create()
               ->select('c.*, m.name as module')
               ->from('CsCategories c')
               ->leftJoin('c.CsModules m on c.module_id = m.module_id')
               ->orderby($sortorder)
               ->fetchArray();
    }

    /**
     * fetchSingleCategory
     *
     */
    public static function fetchSingleCategory($cat_id)
    {
        $cats =  Doctrine_Query::create()
                    ->select('c.*')
                    ->from('CsCategories c')
                    ->where('cat_id = ' . $cat_id)
                    ->fetchArray();

        # put things in an array-box for delivery multiple things with one return stmt
        return $cats['0'];
    }

}