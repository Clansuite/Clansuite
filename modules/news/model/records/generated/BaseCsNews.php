<?php

/**
 * This class has been auto-generated by the Doctrine ORM Framework
 */
abstract class BaseCsNews extends Doctrine_Record
{
  public function setTableDefinition()
  {
    $this->setTableName('news');
    $this->hasColumn('news_id', 'integer', 4, array('type' => 'integer', 'length' => 4, 'primary' => true, 'autoincrement' => true));
    $this->hasColumn('news_title', 'string', 255, array('type' => 'string', 'length' => 255, 'notnull' => true));
    $this->hasColumn('news_body', 'string', null, array('type' => 'string', 'notnull' => true));
    $this->hasColumn('cat_id', 'integer', 1, array('type' => 'integer', 'length' => 1, 'primary' => true));
    $this->hasColumn('user_id', 'integer', 4, array('type' => 'integer', 'length' => 4, 'unsigned' => 1, 'primary' => true));
    $this->hasColumn('news_status', 'integer', 4, array('type' => 'integer', 'length' => 4, 'notnull' => true));
  }

  public function setUp()
  {
        parent::setUp();

        # Doctrine Behaviour: Timestampable
        $this->actAs('Timestampable'); # created_at, modified_at
        
        # Doctrine Behaviour: Searchable
        $this->actAs('Searchable', array(
                'fields' => array('news_title', 'news_body')
            )
        );

        $this->index('user_id', array('fields' => 'user_id'));
        $this->hasOne('CsUsers', array('local' => 'user_id',
                                        'foreign' => 'user_id'
                                        #,
                                        #'onDelete' => 'CASCADE')
                                        ));


        $this->index('cat_id', array('fields' => 'cat_id'));
        $this->hasOne('CsCategories', array('local' => 'cat_id',
                                        'foreign' => 'cat_id'
                                        #,
                                        #'onDelete' => 'CASCADE')
                                        ));

        $this->index('news_id', array('fields' => 'news_id'));
        $this->hasMany('CsComments', array('local' => 'news_id',
                                        'foreign' => 'comment_id',
                                        'refClass' => 'CsRelNewsComments'#,
                                        #'onDelete' => 'CASCADE')
                                        ));

  }

}
?>
