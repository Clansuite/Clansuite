<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>log4javascript full demo</title>
		<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
		<meta name="author" content="Tim Down - tim@timdown.co.uk" />
		<meta name="description" content="log4javascript, a logging framework for JavaScript based on log4j" />
		<meta name="robots" content="all" />
		<link rel="stylesheet" type="text/css" media="screen,print" href="../main.css" title="Default" />
		<script type="text/javascript" src="../log4javascript.js"></script>
		<script type="text/javascript">
			//<![CDATA[
			var	log = log4javascript.getLogger("demo");
			log4javascript.logLog.setAlertAllErrors(true);

			var popUpAppender, inPageAppender, browserConsoleAppender, alertAppender;

			var words = ["Watford", "booked", "their", "place", "in", "the", "Premiership",
				"with", "a", "convincing", "victory", "over", "Leeds", "in", "a", "frantic",
				"play-off", "final", "The", "Hornets", "went", "in", "front", "through",
				"Jay", "DeMerit", "powerful", "header", "from", "five", "yards", "after",
				"Ashley", "Young", "corner", "Aidy", "Boothroyd", "side", "were", "two",
				"up", "when", "James", "Chambers", "shot", "deflected", "off", "Eddie",
				"Lewis", "and", "looped", "on", "to", "the", "post", "before", "dropping",
				"in", "off", "Neil", "Sullivan", "Darius", "Henderson", "completed", "the",
				"rout", "with", "a", "cool", "penalty", "after", "Shaun", "Derry",
				"cynically", "felled", "Marlon", "King"];
			
			var loaded = false;
			
			function $(id) {
				return document.getElementById(id);
			}

			function generateRandom() {
				var numberOfEntries = parseInt($("numberOfLogEntries").value);
				for (var i = 0; i < numberOfEntries; i++) {
					var numberOfWords = 1 + Math.floor(10 * Math.random());
					var entryWords = [];
					for (var j = 0; j < numberOfWords; j++) {
						entryWords.push(words[Math.floor(Math.random() * words.length)]);
					}
					var entryMessage = entryWords.join(" ");
					var levelNum = Math.floor(Math.random() * 6);
					switch (levelNum) {
						case 0:
							log.trace(entryMessage);
							break;
						case 1:
							log.debug(entryMessage);
							break;
						case 2:
							log.info(entryMessage);
							break;
						case 3:
							log.warn(entryMessage);
							break;
						case 4:
							log.error(entryMessage);
							break;
						case 5:
							log.fatal(entryMessage);
							break;
					}
				}
			}
			
			function generateObjectExpansion() {
				var debugObj = {
					a: {
						b: "stuff",
						c: 3,
						d: {
							e: ["a", "b", "c"]
						}
					},
					f: "Things",
					g: 5
				};
				log.debug(debugObj);
			}

			function generateError() {
				try {
					throw new Error("Made up error");
				} catch (ex) {
					log.error("Logging an error!", ex);
				}
			}

			function init() {
				$("mainForm").reset();
				$("popup_lazyInit").disabled = false;
				$("inpage_lazyInit").disabled = false;
				loaded = true;
			}
			
			function addPopUpAppender() {
				if (loaded) {
					var lazyInitCheckBox = $("popup_lazyInit");
					popUpAppender = new log4javascript.PopUpAppender(!lazyInitCheckBox.checked);
					log.addAppender(popUpAppender);
					$("popup_config").style.display = "block";
					lazyInitCheckBox.disabled = true;
				} else {
					alert("Please wait till the page has fully loaded");
				}
			}

			function addInPageAppender() {
				if (loaded) {
					var lazyInitCheckBox = $("inpage_lazyInit");
					inPageAppender = new log4javascript.InPageAppender($("inPageConsole"), !lazyInitCheckBox.checked);
					log.addAppender(inPageAppender);
					$("inpage_config").style.display = "block";
					lazyInitCheckBox.disabled = true;
				} else {
					alert("Please wait till the page has fully loaded");
				}
			}
			
			function addBrowserConsoleAppender() {
				if (loaded) {
					browserConsoleAppender = new log4javascript.BrowserConsoleAppender();
					log.addAppender(browserConsoleAppender);
					$("browser_config").style.display = "block";
				} else {
					alert("Please wait till the page has fully loaded");
				}
			}

			function addAlertAppender() {
				if (loaded) {
					alertAppender = new log4javascript.AlertAppender();
					log.addAppender(alertAppender);
					$("alert_config").style.display = "block";
				} else {
					alert("Please wait till the page has fully loaded");
				}
			}
			
			function getDropDownValue(dropDown) {
				return dropDown.options[dropDown.selectedIndex].value;
			}

			function setThreshold(appender, dropDown) {
				appender.setThreshold(log4javascript.Level[getDropDownValue(dropDown)]);
			}
			
			function setLayout(appender, dropDownId, patternSpanId, patternInputId) {
				var dropDown = $(dropDownId);
				var patternSpan = $(patternSpanId);
				var patternInput = $(patternInputId);

				var dropDownValue = getDropDownValue(dropDown);
				
				patternSpan.style.display = (dropDownValue == "pattern") ? "inline" : "none";
				if (dropDownValue == "pattern") {
					appender.setLayout(new log4javascript.PatternLayout(patternInput.value));
				} else if (dropDownValue == "xml") {
					appender.setLayout(new log4javascript.XmlLayout());
				} else if (dropDownValue == "json") {
					appender.setLayout(new log4javascript.JsonLayout());
				} else if (dropDownValue == "httppost") {
					appender.setLayout(new log4javascript.HttpPostDataLayout());
				} else if (dropDownValue == "simple") {
					appender.setLayout(new log4javascript.SimpleLayout());
				} else if (dropDownValue == "null") {
					appender.setLayout(new log4javascript.NullLayout());
				}
			}
			
			function inPageToggleShow(input) {
			}
			
			function updateInPageHideShow() {
				
			}
			
			//]]>
		</script>
	</head>
	<body onload="init()">
		<div id="container" class="nonav">
			<div id="header">
				<h1><a href="../docs/index.html">log4javascript</a></h1>
			</div>
			<div id="content">
				<form id="mainForm">
					<div id="nav">
						<a class="navitem" href="../docs/index.html">docs</a>
						| <a class="navitem" href="../docs/quickstart.html">quick start</a>
						| <a class="navitem" href="../docs/manual.html">manual</a>
						| <a class="navitem" href="basic.html">basic demo</a>
						| <span class="navitem">full demo</span>
						| <a class="navitem" href="http://www.timdown.co.uk/log4javascript" target="_blank">website</a>
					</div>
					<h1>log4javascript full demo</h1>
					<p>
						Enter a log message below and click on one of the buttons to log
						your message at your desired level, or use the "Generate random log entries" option.
						You can also choose to log an example object and/or an example error.
					</p>
	
					<h2>Logging</h2>
					<div class="panel">
						<input type="text" id="logText" value="Put log message here" />
						<input type="button" value="trace" onclick="log.trace($('logText').value)" />
						<input type="button" value="debug" onclick="log.debug($('logText').value)" />
						<input type="button" value="info" onclick="log.info($('logText').value)" />
						<input type="button" value="warn" onclick="log.warn($('logText').value)" />
						<input type="button" value="error" onclick="log.error($('logText').value)" />
						<input type="button" value="fatal" onclick="log.fatal($('logText').value)" />
						<br />
						Generate <input type="text" size="5" id="numberOfLogEntries" value="50" /> random log entries
						<input type="button" value="go" onclick="generateRandom()" />
						<input type="button" value="Log an error" onclick="generateError()" />
						<input type="button" value="Log an example object" onclick="generateObjectExpansion()" />
						<br />
						<input type="checkbox" id="enabled" onclick="log4javascript.setEnabled(this.checked)" checked="checked" /> <label for="enabled">logging enabled</label>
						<input type="checkbox" id="showstacktraces" onclick="log4javascript.setShowStackTraces(this.checked)" /> <label for="showstacktraces">display stack traces (Firefox/Mozilla only)</label>
						<input type="checkbox" id="alertallerrors" onclick="log4javascript.logLog.setAlertAllErrors(this.checked)" checked="checked" /> <label for="alertallerrors">display alerts for all log4javascript errors</label>
						<br />
						Level: <select onchange="log.setLevel(log4javascript.Level[getDropDownValue(this)])">
							<option value="ALL">all</option>
							<option value="TRACE">trace</option>
							<option value="DEBUG" selected="selected">debug (default)</option>
							<option value="INFO">info</option>
							<option value="WARN">warn</option>
							<option value="ERROR">error</option>
							<option value="FATAL">fatal</option>
							<option value="OFF">off</option>
						</select>
					</div>
					<p>
						Create all the appenders you require below.
					</p>
					<p>
						<strong>NB.</strong> Ajax logging is not available here
					</p>
					<h2>Appenders</h2>
					<div id="popUp" class="panel">
						<input type="button" value="Add pop-up logging" onclick="addPopUpAppender(); this.disabled=true; $('popUp').className='panel active';" />
						<input type="checkbox" id="popup_lazyInit" />
						<label for="popup_lazyInit">Create console immediately</label>
						<div id="popup_config" class="hidden">
							<h3>Pop-up logging</h3>
							<p>
								<em><strong>NB</strong> You will need to disable any pop-up blockers you may have
								for this to work.</em>
							</p>
							Threshold: <select onchange="setThreshold(popUpAppender, this)">
								<option value="ALL" selected="selected">all (default)</option>
								<option value="TRACE">trace</option>
								<option value="DEBUG">debug</option>
								<option value="INFO">info</option>
								<option value="WARN">warn</option>
								<option value="ERROR">error</option>
								<option value="FATAL">fatal</option>
								<option value="OFF">off</option>
							</select>
							<div>
								Layout: <select id="popup_layout" onchange="setLayout(popUpAppender, 'popup_layout', 'popup_patternlayout', 'popup_pattern')">
									<option value="pattern" selected="selected">Pattern layout (default)</option>
									<option value="xml">XML</option>
									<option value="json">JSON</option>
									<option value="httppost">HTTP post data</option>
									<option value="simple">Simple</option>
									<option value="null">Null</option>
								</select>
								<span id="popup_patternlayout">Pattern: <input type="text" id="popup_pattern" value="%d{HH:mm:ss} %-5p - %m{1}%n" size="50" onchange="setLayout(popUpAppender, 'popup_layout', 'popup_patternlayout', 'popup_pattern')" /></span>
							</div>
							<br />
							<label for="popup_maxMessages">Maximum number of messages (blank for unlimited):</label> <input type="text" id="popup_maxMessages" size="6" value="" onchange="popUpAppender.setMaxMessages(this.value==''?null:this.value); this.value=(popUpAppender.getMaxMessages()==null)?'':popUpAppender.getMaxMessages()" />
							<br />

							<input type="checkbox" id="popup_focusPopUp" onclick="popUpAppender.setFocusPopUp(this.checked); this.checked=popUpAppender.isFocusPopUp()" />
							<label for="popup_focusPopUp">Focus pop-up window</label>
	
							<input type="checkbox" id="popup_useOldPopUp" onclick="popUpAppender.setUseOldPopUp(this.checked); this.checked=popUpAppender.isUseOldPopUp()" checked="checked" />
							<label for="popup_useOldPopUp">Use existing pop-up</label>
							
							<input type="checkbox" id="popup_complainAboutPopUpBlocking" onclick="popUpAppender.setComplainAboutPopUpBlocking(this.checked); this.checked=popUpAppender.isComplainAboutPopUpBlocking()" checked="checked" />
							<label for="popup_complainAboutPopUpBlocking">Complain about pop-up blockers</label>
							<br />
							<input type="checkbox" id="popup_newestMessageAtTop" onclick="popUpAppender.setNewestMessageAtTop(this.checked); this.checked=popUpAppender.isNewestMessageAtTop()" />
							<label for="popup_newestMessageAtTop">Append new log messages at the top of the window</label>
							<br />
							<input type="checkbox" id="popup_scrollToLatestMessage" onclick="popUpAppender.setScrollToLatestMessage(this.checked); this.checked=popUpAppender.isScrollToLatestMessage()" checked="checked" />
							<label for="popup_scrollToLatestMessage">Scroll to latest message when message is logged</label>
							<br />
							<input type="checkbox" id="popup_reopenWhenClosed" onclick="popUpAppender.setReopenWhenClosed(this.checked); this.checked=popUpAppender.isReopenWhenClosed()" />
							<label for="popup_reopenWhenClosed">Reopen the pop-up window automatically after being closed when a new log message is logged</label>
							<br />
							<label for="popup_width">Width:</label> <input type="text" id="popup_width" size="4" value="600" onchange="popUpAppender.setWidth(this.value); this.value=popUpAppender.getWidth()" />
							<label for="popup_height">Height:</label> <input type="text" id="popup_height" size="4" value="400" onchange="popUpAppender.setHeight(this.value); this.value=popUpAppender.getHeight()" />
							<input type="button" value="Close window" onclick="popUpAppender.close()" />
						</div>
					</div>
					<br />
					<div id="inPage" class="panel">
						<input type="button" value="Add in-page logging" onclick="addInPageAppender(); this.disabled=true; $('inPage').className='panel active';" />
						<input type="checkbox" id="inpage_lazyInit" />
						<label for="inpage_lazyInit">Create console immediately</label>
						<div id="inpage_config" class="hidden">
							<h3>In-page logging</h3>
							Threshold: <select onchange="setThreshold(inPageAppender, this)">
								<option value="ALL" selected="selected">all (default)</option>
								<option value="TRACE">trace</option>
								<option value="DEBUG">debug</option>
								<option value="INFO">info</option>
								<option value="WARN">warn</option>
								<option value="ERROR">error</option>
								<option value="FATAL">fatal</option>
								<option value="OFF">off</option>
							</select>
							<div>
								Layout: <select id="inpage_layout" onchange="setLayout(inPageAppender, 'inpage_layout', 'inpage_patternlayout', 'inpage_pattern')">
									<option value="pattern" selected="selected">Pattern layout (default)</option>
									<option value="xml">XML</option>
									<option value="json">JSON</option>
									<option value="httppost">HTTP post data</option>
									<option value="simple">Simple</option>
									<option value="null">Null</option>
								</select>
								<span id="inpage_patternlayout">Pattern: <input type="text" id="inpage_pattern" value="%d{HH:mm:ss} %-5p - %m{1}%n" size="50" onchange="setLayout(inPageAppender, 'inpage_layout', 'inpage_patternlayout', 'inpage_pattern')" /></span>
							</div>
							<label for="inpage_maxMessages">Maximum number of messages (blank for unlimited):</label> <input type="text" id="inpage_maxMessages" size="6" value="" onchange="inPageAppender.setMaxMessages(this.value==''?null:this.value); this.value=(inPageAppender.getMaxMessages()==null)?'':inPageAppender.getMaxMessages()" />
							<br />
							<!--
							<input type="button" id="inpage_hideShow" value="Hide" disabled="disabled" onclick="inPageToggleShow()" />
							<br />
							-->
							<input type="checkbox" id="inpage_initiallyMinimized" onclick="inPageAppender.setInitiallyMinimized(this.checked); this.checked=inPageAppender.isInitiallyMinimized(); updateInPageHideShow()" />
							<label for="inpage_initiallyMinimized">Start minimized</label>
							<br />
							<input type="checkbox" id="inpage_newestMessageAtTop" onclick="inPageAppender.setNewestMessageAtTop(this.checked); this.checked=inPageAppender.isNewestMessageAtTop()" />
							<label for="inpage_newestMessageAtTop">Append new log messages at the top of the window</label>
							<br />
							<input type="checkbox" id="inpage_scrollToLatestMessage" onclick="inPageAppender.setScrollToLatestMessage(this.checked); this.checked=inPageAppender.isScrollToLatestMessage()" checked="checked" />
							<label for="inpage_scrollToLatestMessage">Scroll to latest message when message is logged</label>
							<br />
							<label for="inpage_width">Width:</label> <input type="text" id="inpage_width" size="6" value="100%" onchange="inPageAppender.setWidth(this.value); this.value=inPageAppender.getWidth()" />
							<label for="inpage_height">Height:</label> <input type="text" id="inpage_height" size="6" value="250px" onchange="inPageAppender.setHeight(this.value); this.value=inPageAppender.getHeight()" />
							<input type="button" id="inpage_hideShow" value="Hide" disabled="disabled" onclick="inPageToggleShow()" />
							<input type="button" value="Close window" onclick="inPageAppender.close()" />
							<br />
							<div class="padded">
								<div id="inPageConsole"></div>
							</div>
						</div>
					</div>
					<br />
					<div id="browser" class="panel">
						<input type="button" value="Add built-in browser logging" onclick="addBrowserConsoleAppender(); this.disabled=true; $('browser').className='panel active';" />
						<div id="browser_config" class="hidden">
							<h3>Opera/Safari/FireBug built-in console logging</h3>
							Threshold: <select onchange="setThreshold(browserConsoleAppender, this)">
								<option value="ALL">all</option>
								<option value="TRACE">trace</option>
								<option value="DEBUG" selected="selected">debug (default)</option>
								<option value="INFO">info</option>
								<option value="WARN">warn</option>
								<option value="ERROR">error</option>
								<option value="FATAL">fatal</option>
								<option value="OFF">off</option>
							</select>
							<div>
								Layout: <select id="browser_layout" onchange="setLayout(browserConsoleAppender, 'browser_layout', 'browser_patternlayout', 'browser_pattern')">
									<option value="pattern">Pattern layout</option>
									<option value="xml">XML</option>
									<option value="json">JSON</option>
									<option value="httppost">HTTP post data</option>
									<option value="simple">Simple</option>
									<option value="null" selected="selected">Null (default)</option>
								</select>
								<span id="browser_patternlayout" style="display: none">Pattern: <input type="text" id="browser_pattern" value="%d{HH:mm:ss} %-5p - %m{1}%n" size="50" onchange="setLayout(browserConsoleAppender, 'browser_layout', 'browser_patternlayout', 'browser_pattern')" /></span>
							</div>
						</div>
					</div>
					<br />
					<div id="alert" class="panel">
						<input type="button" value="Add alert logging" onclick="addAlertAppender(); this.disabled=true; $('alert').className='panel active';" />
						<div id="alert_config" class="hidden">
							<h3>Alert logging</h3>
							Threshold: <select onchange="setThreshold(alertAppender, this)">
								<option value="ALL" selected="selected">all (default)</option>
								<option value="TRACE">trace</option>
								<option value="DEBUG">debug</option>
								<option value="INFO">info</option>
								<option value="WARN">warn</option>
								<option value="ERROR">error</option>
								<option value="FATAL">fatal</option>
								<option value="OFF">off</option>
							</select>
							<div>
								Layout: <select id="alert_layout" onchange="setLayout(alertAppender, 'alert_layout', 'alert_patternlayout', 'alert_pattern')">
									<option value="pattern">Pattern layout</option>
									<option value="xml">XML</option>
									<option value="json">JSON</option>
									<option value="httppost">HTTP post data</option>
									<option value="simple" selected="selected">Simple (default)</option>
									<option value="null">Null</option>
								</select>
								<span id="alert_patternlayout" style="display: none">Pattern: <input type="text" id="alert_pattern" value="%d{HH:mm:ss} %-5p - %m{1}%n" size="50" onchange="setLayout(alertAppender, 'alert_layout', 'alert_patternlayout', 'alert_pattern')" /></span>
							</div>
						</div>
					</div>
					<br />
					<div id="ajax" class="panel">
						<a href="http://www.timdown.co.uk/log4javascript/log4javascript-current/demos/full.html">Live
							demo of Ajax logging</a>
					</div>
				</form>
			</div>
			<br class="clear" />
			<div id="footer">
				<span class="externallinkinfo">
					<strong>NB.</strong> All external links open in a new window.
				</span>
				Written by Tim Down. <a href="mailto:tim@timdown.co.uk">tim@timdown.co.uk</a>
				<br />
				log4javascript is distributed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html"
					title="Apache License, Version 2.0 (opens in new window)" target="_blank">Apache License,
					Version 2.0</a>
	
			</div>
		</div>
	
	</body>
</html>
